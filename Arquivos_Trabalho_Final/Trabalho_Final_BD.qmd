---
title: "Visualização de Dados <br> R, Python e Julia"
author: "Bruce Trevisan, Heitor Brotto, <br> Guilherme Alves e Rafael Carneiro"
format:
  beamer:
    theme: simple
    slide-number: true
    code-copy: true
---

## <span style="color: blue; font-weight: bold;">O que é Visualização de Dados?</span>

A Visualização de Dados converte os dados brutos em gráficos, mapas e painéis interativos para análise e decisões objetivas.

Seus 3 principais pilares são:

- Exploração de Dados: Facilita a interpretação e compreensão da estrutura dos dados.

- Descoberta de Padrões: Identifica tendências e outliers, gerando insights críticos.

- Comunicação de Resultados: Transmite a informação de forma clara, garantindo o alinhamento e decisões assertivas. 

---

## <span style="color: blue; font-weight: bold;">Leitura e processamento em bloco</span>

A Leitura e Processamento em Bloco é uma técnica crucial para processar grandes conjuntos de dados em sistemas de baixa performance.
<br>

Consiste na leitura fragmentada do conjunto de dados, carregando-o em partes na memória (em vez de integralmente), otimizando o uso de recursos e evitando falhas por falta de memória.

---

## <span style="color: blue; font-weight: bold;"> Em Julia</span>

Julia é uma linguagem de programação de alto nível, dinâmica e de código aberto, otimizada para computação científica e análise de dados.

- Os pacotes usados no trabalho foram:
  - Plots.jl
  - CSV.jl
  - DataFrames.jl
  - Dates.jl
  - Statistics.jl
  - Dates.jl

---

## <span style="color: blue; font-weight: bold;">Comparação entre R e Python</span>

Ambas as implementações, em R e Python, demonstraram capacidade idênticas para processar o grande conjunto de dados de vôos utilizando a técnica de leitura em bloco.
<br>

Os resultados estatísticos finais (como o percentual médio e máximo de atraso das companhias aéreas) foram consistentes e idênticos entre as duas linguagens
<br>

Os resultados a seguir: 

---

## <span style="color: blue; font-weight: bold;">R vs. Python</span>

![](comparar.jpg)

---

## <span style="color: blue; font-weight: bold;">Sobre o banco de dados </span>

 - Informações de Voôs de 2015 pelas principais companhias aéreas do EUA 
 <br>
- O arquivo é de 200.91153 Mb e contém 31 colunas
<br>
- Analisamos o problema, que seria determinar o percentual de voos atrasados na chegada (ARRIVAL DELAY > 10 minutos)
<br>
- As estatísticas calculadas para as companhias (AA, DL, UA, US) **foram consistentes entre as três linguagens** (Julia, R e Python).
<br>
- O resultado final é visualizado através de mapas de calor em formato de calendário para cada companhia aérea.

---

## <span style="color: blue; font-weight: bold;">Desafio (Em Python) </span> {.center}

O objetivo da visualização é gerar um mapa de calor em formato de calendário para cada companhia aérea (AA, DL, UA, US) que represente a magnitude do percentual de voos atrasados ao longo do ano.

---

## <span style="color: blue; font-weight: bold;">Código do calendário de calor</span>

```{julia}
function plot_calendar_heatmap(stats::DataFrame, airline_code::AbstractString)
    airline_data = filter(row -> row.AIRLINE == airline_code, stats)

    if eltype(airline_data.Date) <: AbstractString
        airline_data.Date = Date.(airline_data.Date)
    end

    p = plot(layout = (4, 3), size = (1000, 800),
             title = "Heatmap Calendário - $(airline_code)")

    for month in 1:12
        month_data = filter(r -> month(r.Date) == month, airline_data)

        heatmap_data = fill(NaN, 7, 6)

        for r in eachrow(month_data)
            day_number = day(r.Date)
            weekday = dayofweek(r.Date)         
            week_in_month = Int(fld(day_number - 1, 7) + 1)
            heatmap_data[weekday, week_in_month] = r.Perc
        end

        # Paleta de cores
        palette = cgrad([RGB(1,1,1), :yellow, :orange, :red])

        # Plot individual do mês
        plt = heatmap(
            heatmap_data;
            title = monthname(month),
            c = palette,
            colorbar = false,
            xlabel = "Semana",
            yticks = (1:7, ["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]),
            ylabel = ""
        )

        plot!(p, plt)
    end

    return p
end    
```

---

## <span style="color: blue; font-weight: bold;">Mapa de Calor</span>

![](mapa_calor.jpg)
---

## <span style="color: blue; font-weight: bold;"> Agradecemos pela atenção! </span> {.center}